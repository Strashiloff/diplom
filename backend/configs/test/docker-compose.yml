version: '3'
services:

  web:
    build:
      context: /home/alex/dev/
      dockerfile: Dockerfile
    environment:
      OPENSSL_CONF: /usr/local/ssl/openssl.cnf
    volumes:
      - "/mnt/frontend/www:/var/www"
    ports:
      - "8080:80"
    depends_on:
      - nginx

  pma:
    image: adminer:latest
    ports:
      - "8081:8080"

  db:
    image: postgres:12
    environment:
      - ROOT_PASSWORD=123
    volumes:
      - "/mnt/frontend/postgresql /var/lib/postgresql/ "
      - "/mnt/frontend/pos.cnf:/etc/pos.cnf"
    ports:
      - "3306:3306"

  nginx:
    image: nginx:stable
    volumes:
      - "/mnt/frontend/conf/nginx/etc/nginx:/etc/nginx"
      - "/mnt/frontend/log/nginx:/var/log/nginx"
    ports:
      - "80:80"
      - "443:443"